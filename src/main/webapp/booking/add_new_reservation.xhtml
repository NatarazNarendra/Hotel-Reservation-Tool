<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>
        <f:metadata>                        
            <f:viewParam name="guestId" value="#{newReservationBean.guestId}"/>
            <f:viewParam name="roomId" value="#{newReservationBean.roomId}"/>
            <f:event type="preRenderView" listener="#{newReservationBean.init}"/>    
        </f:metadata> 
        <ui:composition template="/WEB-INF/template-bootstrap.html">
            <ui:define name="page_header">
                #{msgs.new_reservation}
            </ui:define>

            <ui:define name="content">
                <form jsf:id="welcomeForm">
                    <div class="form-group">                                                            
                        <label for="id">#{msgs.guest_id}</label>
                        <h:inputText id="id"
                                     value="#{newReservationBean.guestId}"
                                     required="true"
                                     requiredMessage="#{msgs.guest_id_is_required}"
                                     p:placeholder="#{msgs.enter_guest_id}" 
                                     styleClass="form-control #{component.valid ? '' : 'input-error'}"
                                     maxlength="20"
                                     validatorMessage="#{msgs.provide_valid_id}">                                 
                            <f:ajax render="@this :messagesPanel" />
                        </h:inputText>

                        <label for="roomid">#{msgs.room_number}</label>
                        <h:inputText id="roomid"
                                     value="#{newReservationBean.roomNumber}"
                                     required="true"
                                     requiredMessage="#{msgs.room_number_is_required}"
                                     p:placeholder="#{msgs.enter_room_number}" 
                                     styleClass="form-control #{component.valid ? '' : 'input-error'}"
                                     maxlength="20"
                                     validatorMessage="#{msgs.provide_valid_room_number}">                                                             
                            <f:validateRegex pattern="^[0-9a-zA-Z]+$"/>
                            <f:validateLength minimum="1"/>
                            <f:ajax render="@this :messagesPanel" />
                        </h:inputText>
                        
                        <label for="checkin">#{msgs.checkin_date}</label>
                        <h:inputText id="checkin"                                     
                                     value="#{newReservationBean.booking.checkinDate}"
                                     required="true"
                                     p:type="date"
                                     p:placeholder="#{msgs.checkin_date}" 
                                     styleClass="form-control #{component.valid ? '' : 'input-error'}"
                                     >    
                            <!-- f:convertDateTime pattern="yyyy-MM-dd"/ -->
                            <f:ajax render="@this :messagesPanel" />
                        </h:inputText>

                        
                        <label for="checkout">#{msgs.checkout_date}</label>
                        <h:inputText id="checkout"                                     
                                     value="#{newReservationBean.booking.checkoutDate}"
                                     required="true"
                                     p:type="date"
                                     p:placeholder="#{msgs.checkout_date}" 
                                     styleClass="form-control #{component.valid ? '' : 'input-error'}"
                                     >            
                            <!-- f:convertDateTime pattern="yyyy-MM-dd"/ -->
                            <f:ajax render="@this :messagesPanel" />
                        </h:inputText>
                    </div>

                    <div class="btn-toolbar">
                        <input type="submit" 
                               jsf:action="/guestbook.xhtml?faces-redirect=true" 
                               class="btn btn-sm"
                               jsf:immediate="true"
                               value="#{msgs.btn_discard_changes}">
                        </input>                    
                        <input type="submit" 
                               value="#{msgs.btn_book_room}" 
                               class="btn btn-sm btn-primary"
                               jsf:action="#{newReservationBean.addReservation}">
                        </input>
                    </div>
                </form>

            </ui:define>

        </ui:composition>

    </body>
</html>
